<html>
  <head>
    <style>
      h1 {
        text-align: center;
      }
      h3 {
        text-align: center !important;
        margin: 10px 0;
      }
      h4 {
        font-size: 15px;
        line-height: 20px;
        text-align: left;
        margin: 0;
        overflow-wrap: break-word; /* Break long words if necessary (modern standard) */
        word-wrap: break-word; /* Compatibility with older browsers */
        word-break: break-word; /* Break long words between letters (if needed) */
        white-space: normal; /* Allow text to wrap onto multiple lines */
      }
      span {
        line-height: 18px;
      }
      .date {
        width: 100%;
        display: block;
        text-align: center;
        font-size: small;
      }
      .planner {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        gap: 8px;
      }
      .day {
        background-color: #fff;
        border: 1px solid #ccc;
        border-radius: 5px;
        padding: 8px;
        min-height: 100px;
        position: relative;
      }
      .entry {
        padding: 12px;
        margin: 8px 0;
        border-radius: 3px;
        font-size: smaller;
        color: #fff;
        cursor: pointer;
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      .planning {
        opacity: 0.6;
        border: 4px dashed red;
        background-color: orange;
      }
      .header {
        justify-content: space-between;
        align-items: center;
        margin-bottom: 16px;
      }
      .dailyEstimate {
        width: 100%;
        display: block;
        text-align: center;
      }
      .info {
        margin: 0 auto 0 0;
      }
      @media (max-width: 1024px) {
        .planner {
          grid-template-columns: repeat(3, 1fr);
        }
      }
      @media (max-width: 480px) {
        .planner {
          grid-template-columns: 1fr;
        }
      }
      .ecount {
        font-size: smaller;
        color: #fff;
        display: inline-block;
        text-align: right;
        width: 100%;
      }
      .status {
        font-size: smaller;
        color: #fff;
        background: black;
        padding: 2px 5px;
        border-radius: 5px;
        border: 1px solid gray;
      }
      .buttons {
        display: flex;
        justify-content: center;
        margin-bottom: 16px;
        margin-top: 16px;
        gap: 8px;
      }
      .buttons button,
      .buttons select {
        padding: 8px 16px;
        background-color: #007bff;
        color: #fff;
        border: none;
        border-radius: 5px;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <div class="buttons">
      <button id="back">&lt;</button>
      <button id="today">today</button>
      <button id="forward">&gt;</button>&nbsp;<button id="showPlanned">
        Todo
      </button>
      <select id="nameDropdown">
        <option value="">All</option>
      </select>
    </div>
    <div class="planner">
      <div class="day" data-day="Monday">
        <div class="header">
          <h3>Monday</h3>
          <span class="date"></span>
          <span class="dailyEstimate"></span>
        </div>
        <div class="entries"></div>
      </div>
      <div class="day" data-day="Tuesday">
        <div class="header">
          <h3>Tuesday</h3>
          <span class="date"></span>
          <span class="dailyEstimate"></span>
        </div>
        <div class="entries"></div>
      </div>
      <div class="day" data-day="Wednesday">
        <div class="header">
          <h3>Wednesday</h3>
          <span class="date"></span>
          <span class="dailyEstimate"></span>
        </div>
        <div class="entries"></div>
      </div>
      <div class="day" data-day="Thursday">
        <div class="header">
          <h3>Thursday</h3>
          <span class="date"></span>
          <span class="dailyEstimate"></span>
        </div>
        <div class="entries"></div>
      </div>
      <div class="day" data-day="Friday">
        <div class="header">
          <h3>Friday</h3>
          <span class="date"></span>
          <span class="dailyEstimate"></span>
        </div>
        <div class="entries"></div>
      </div>
    </div>

    <script>
      window.dates = [];

      dates = window.dates;

      dates.push({
    id: '1405',
    name: 'Soc: Nordfyn (Steen Ingemann Hansen)',
    project: 'Onboarding + webmaster, foreninger (via Dialog)',
    client: 'Socialdemokratiet',
    status: 'Doing',
    assigned: 'Tidmand',
    startUnix: 1709596800000,
    estimate: '',
    estimateMs: 0,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '',
    jobEstimateMs: 0,
    used: '7:00',
    usedMs: 25200000,
    endUnix: 1709596800000
});
dates.push({
    id: '1565',
    name: 'Rebelshub udvikling',
    project: 'Rebelshub 2025 ',
    client: 'Dixon',
    status: 'Doing',
    assigned: 'Niki Wix Skaarup',
    startUnix: 1740441600000,
    estimate: '40:00',
    estimateMs: 144000000,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '40:00',
    jobEstimateMs: 144000000,
    used: '0:00',
    usedMs: 0,
    endUnix: 1741046400000
});
dates.push({
    id: '1715',
    name: 'Tilretning af Wordpress website',
    project: 'Psykolog primær konto ',
    client: 'Psykolog Pernille',
    status: 'Doing',
    assigned: 'Tidmand',
    startUnix: 1737244800000,
    estimate: '3:30',
    estimateMs: 12600000,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '3:30',
    jobEstimateMs: 12600000,
    used: '3:00',
    usedMs: 10800000,
    endUnix: 1737331200000
});
dates.push({
    id: '1730',
    name: 'side titel hero teaser seo open graph ',
    project: 'AVR Primær',
    client: 'Anne-Vibeke Rejser',
    status: 'Waiting',
    assigned: 'Tidmand',
    startUnix: 1741219200000,
    estimate: '6:00',
    estimateMs: 21600000,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '6:00',
    jobEstimateMs: 21600000,
    used: '3:15',
    usedMs: 11700000,
    endUnix: 1741564800000
});
dates.push({
    id: '1748',
    name: 'Låse-funktionen på LOFnet er i udu',
    project: 'Support på LOF.DK',
    client: 'LOF landsorganisation',
    status: 'Planning',
    assigned: 'Jesper Ordrup',
    startUnix: 1737936000000,
    estimate: '3:00',
    estimateMs: 10800000,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '3:00',
    jobEstimateMs: 10800000,
    used: '0:00',
    usedMs: 0,
    endUnix: 1738108800000
});
dates.push({
    id: '1749',
    name: 'Hold forsvundet fra hjemmeside',
    project: 'Support på LOF.DK',
    client: 'LOF landsorganisation',
    status: 'Doing',
    assigned: 'Jesper Ordrup',
    startUnix: 1738195200000,
    estimate: '16:00',
    estimateMs: 57600000,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '16:00',
    jobEstimateMs: 57600000,
    used: '0:00',
    usedMs: 0,
    endUnix: 1738540800000
});
dates.push({
    id: '1756',
    name: 'Components',
    project: 'LOF WEB 2025 - udvikling',
    client: 'LOF landsorganisation',
    status: 'Todo',
    assigned: '',
    startUnix: 1737676800000,
    estimate: '0:00',
    estimateMs: 0,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '0:00',
    jobEstimateMs: 0,
    used: '0:00',
    usedMs: 0,
    endUnix: 1737849600000
});
dates.push({
    id: '1757',
    name: 'sider',
    project: 'LOF WEB 2025 - udvikling',
    client: 'LOF landsorganisation',
    status: 'Todo',
    assigned: 'Niki Wix Skaarup',
    startUnix: 1742774400000,
    estimate: '0:00',
    estimateMs: 0,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '0:00',
    jobEstimateMs: 0,
    used: '0:00',
    usedMs: 0,
    endUnix: 1742947200000
});
dates.push({
    id: '1758',
    name: 'asa websync',
    project: 'LOF WEB 2025 - udvikling',
    client: 'LOF landsorganisation',
    status: 'Todo',
    assigned: '',
    startUnix: 1738195200000,
    estimate: '0:00',
    estimateMs: 0,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '0:00',
    jobEstimateMs: 0,
    used: '0:00',
    usedMs: 0,
    endUnix: 1738368000000
});
dates.push({
    id: '1762',
    name: 'test',
    project: 'LOF WEB 2025 - test',
    client: 'LOF landsorganisation',
    status: 'Todo',
    assigned: '',
    startUnix: 1743465600000,
    estimate: '0:00',
    estimateMs: 0,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '0:00',
    jobEstimateMs: 0,
    used: '0:00',
    usedMs: 0,
    endUnix: 1743638400000
});
dates.push({
    id: '1764',
    name: 'umbraco ',
    project: 'LOF WEB 2025 - test',
    client: 'LOF landsorganisation',
    status: 'Todo',
    assigned: '',
    startUnix: 1743465600000,
    estimate: '20:00',
    estimateMs: 72000000,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '20:00',
    jobEstimateMs: 72000000,
    used: '0:00',
    usedMs: 0,
    endUnix: 1743897600000
});
dates.push({
    id: '1765',
    name: 'frontend ',
    project: 'LOF WEB 2025 - test',
    client: 'LOF landsorganisation',
    status: 'Todo',
    assigned: '',
    startUnix: 1743984000000,
    estimate: '20:00',
    estimateMs: 72000000,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '20:00',
    jobEstimateMs: 72000000,
    used: '0:00',
    usedMs: 0,
    endUnix: 1744416000000
});
dates.push({
    id: '1766',
    name: 'rapporter ',
    project: 'LOF WEB 2025 - test',
    client: 'LOF landsorganisation',
    status: 'Todo',
    assigned: '',
    startUnix: 1744502400000,
    estimate: '12:00',
    estimateMs: 43200000,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '12:00',
    jobEstimateMs: 43200000,
    used: '0:00',
    usedMs: 0,
    endUnix: 1744761600000
});
dates.push({
    id: '1767',
    name: 'styre test med kunde ',
    project: 'LOF WEB 2025 - test',
    client: 'LOF landsorganisation',
    status: 'Todo',
    assigned: '',
    startUnix: 1744848000000,
    estimate: '12:00',
    estimateMs: 43200000,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '12:00',
    jobEstimateMs: 43200000,
    used: '0:00',
    usedMs: 0,
    endUnix: 1745107200000
});
dates.push({
    id: '1769',
    name: 'Import af gl site date og konfigurationer ',
    project: 'LOF WEB 2025 - launch',
    client: 'LOF landsorganisation',
    status: 'Todo',
    assigned: '',
    startUnix: 1745798400000,
    estimate: '45:00',
    estimateMs: 162000000,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '45:00',
    jobEstimateMs: 162000000,
    used: '0:00',
    usedMs: 0,
    endUnix: 1745798400000
});
dates.push({
    id: '1770',
    name: 'Undervisning ',
    project: 'LOF WEB 2025 - launch',
    client: 'LOF landsorganisation',
    status: 'Todo',
    assigned: '',
    startUnix: 1745884800000,
    estimate: '16:00',
    estimateMs: 57600000,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '16:00',
    jobEstimateMs: 57600000,
    used: '0:00',
    usedMs: 0,
    endUnix: 1746230400000
});
dates.push({
    id: '1771',
    name: 'Onboarding ',
    project: 'LOF WEB 2025 - launch',
    client: 'LOF landsorganisation',
    status: 'Todo',
    assigned: '',
    startUnix: 1746316800000,
    estimate: '60:00',
    estimateMs: 216000000,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '60:00',
    jobEstimateMs: 216000000,
    used: '0:00',
    usedMs: 0,
    endUnix: 1747440000000
});
dates.push({
    id: '1780',
    name: 'Miljø scripts etc',
    project: 'LOF WEB 2025 - udvikling',
    client: 'LOF landsorganisation',
    status: 'Todo',
    assigned: 'Niki Wix Skaarup',
    startUnix: 1743465600000,
    estimate: '8:00',
    estimateMs: 28800000,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '8:00',
    jobEstimateMs: 28800000,
    used: '0:00',
    usedMs: 0,
    endUnix: 1743638400000
});
dates.push({
    id: '1782',
    name: 'Diverse dfn',
    project: 'Danish Fight Night (sponseret)',
    client: 'International Entertainment Original ApS',
    status: 'Doing',
    assigned: 'Tidmand',
    startUnix: 1737590400000,
    estimate: '',
    estimateMs: 0,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '',
    jobEstimateMs: 0,
    used: '9:45',
    usedMs: 35100000,
    endUnix: 1738195200000
});
dates.push({
    id: '1784',
    name: 'New job ...',
    project: 'test',
    client: 'UMAKERS',
    status: 'Planning',
    assigned: 'Jesper Ordrup',
    startUnix: 1737590400000,
    estimate: '10:00',
    estimateMs: 36000000,
    tasksEstimate: '2:00',
    tasksEstimateMs: 7200000,
    jobEstimate: '10:00',
    jobEstimateMs: 36000000,
    used: '0:00',
    usedMs: 0,
    endUnix: 1737936000000
});
dates.push({
    id: '929',
    type: 'task',
    name: 'tas',
    project: 'test / New job ...',
    client: 'UMAKERS',
    status: 'Todo',
    assigned: 'Jesper Ordrup',
    startUnix: 1737676800000,
    estimate: '2:00',
    estimateMs: 7200000,
    endUnix: 1737676800000
});
dates.push({
    id: '1787',
    name: 'FORA Mails og undervisernet FORA',
    project: 'Undervisernet - løbende opgaver',
    client: 'Dansk Oplysnings Forbund',
    status: 'Doing',
    assigned: 'Jesper Ordrup',
    startUnix: 1737676800000,
    estimate: '3:00',
    estimateMs: 10800000,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '3:00',
    jobEstimateMs: 10800000,
    used: '1:00',
    usedMs: 3600000,
    endUnix: 1738022400000
});
dates.push({
    id: '1809',
    name: 'dansk emballage',
    project: 'Support / løbende opgaver',
    client: 'Dansk Emballage',
    status: 'Doing',
    assigned: 'Niki Wix Skaarup',
    startUnix: 1738627200000,
    estimate: '1:00',
    estimateMs: 3600000,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '1:00',
    jobEstimateMs: 3600000,
    used: '2:00',
    usedMs: 7200000,
    endUnix: 1738627200000
});
dates.push({
    id: '1810',
    name: 'croplife - gsc',
    project: 'Hammer',
    client: 'DANSK PLANTEVÆRN / Croplife',
    status: 'Doing',
    assigned: 'Tidmand',
    startUnix: 1738627200000,
    estimate: '1:00',
    estimateMs: 3600000,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '1:00',
    jobEstimateMs: 3600000,
    used: '0:30',
    usedMs: 1800000,
    endUnix: 1738713600000
});
dates.push({
    id: '1812',
    name: 'Billede fix scroll position relateret til tekst umakers.dk',
    project: 'INTERNE PROJEKTER (ingen faktura)',
    client: 'UMAKERS',
    status: 'Waiting',
    assigned: 'Tidmand',
    startUnix: 1738713600000,
    estimate: '',
    estimateMs: 0,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '',
    jobEstimateMs: 0,
    used: '0:45',
    usedMs: 2700000,
    endUnix: 1738713600000
});
dates.push({
    id: '1821',
    name: 'Problem med rettigheder i Hammer for brugere',
    project: 'SOC hammer support ',
    client: 'Socialdemokratiet',
    status: 'Doing',
    assigned: '',
    startUnix: 1739232000000,
    estimate: '',
    estimateMs: 0,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '',
    jobEstimateMs: 0,
    used: '0:30',
    usedMs: 1800000,
    endUnix: 1739232000000
});
dates.push({
    id: '1842',
    name: 'Billede fra automatisk opdateret holdvælger bruger ikke crop',
    project: 'Support på LOF.DK',
    client: 'LOF landsorganisation',
    status: 'Doing',
    assigned: '',
    startUnix: 1738540800000,
    estimate: '',
    estimateMs: 0,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '',
    jobEstimateMs: 0,
    used: '0:30',
    usedMs: 1800000,
    endUnix: 1738540800000
});
dates.push({
    id: '1843',
    name: 'Faktura til TAMU via EAN',
    project: 'Øvrige interne (ingen faktura)',
    client: 'UMAKERS',
    status: 'Todo',
    assigned: 'Jesper Ordrup',
    startUnix: 1740960000000,
    estimate: '',
    estimateMs: 0,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '',
    jobEstimateMs: 0,
    used: '0:00',
    usedMs: 0,
    endUnix: 1740960000000
});
dates.push({
    id: '1844',
    name: 'Problem med link i Soc nyhedsbrev - omskrives til soc.trialog.dk og vises som sådan i teksten',
    project: 'SOC hammer support ',
    client: 'Socialdemokratiet',
    status: 'Todo',
    assigned: 'Jesper Ordrup',
    startUnix: 1739232000000,
    estimate: '',
    estimateMs: 0,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '',
    jobEstimateMs: 0,
    used: '0:00',
    usedMs: 0,
    endUnix: 1739232000000
});
dates.push({
    id: '1845',
    name: 'Soc Gladsaxe hjemmeside uden nyhedsbrev',
    project: 'SOC stripe opgaver',
    client: 'Socialdemokratiet',
    status: 'Doing',
    assigned: 'Tidmand',
    startUnix: 1738281600000,
    estimate: '',
    estimateMs: 0,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '',
    jobEstimateMs: 0,
    used: '0:00',
    usedMs: 0,
    endUnix: 1738281600000
});
dates.push({
    id: '961',
    type: 'task',
    name: 'Soc Gladsaxe - onboarding',
    project: 'SOC stripe opgaver / Soc Gladsaxe hjemmeside uden nyhedsbrev',
    client: 'Socialdemokratiet',
    status: 'Done',
    assigned: 'Tidmand',
    startUnix: 1742256000000,
    estimate: '0:00',
    estimateMs: 0,
    endUnix: 1742256000000
});
dates.push({
    id: '1847',
    name: 'Soc Odsherred: 3 timer webmaster',
    project: 'SOC stripe opgaver',
    client: 'Socialdemokratiet',
    status: 'Doing',
    assigned: 'Tidmand',
    startUnix: 1741219200000,
    estimate: '',
    estimateMs: 0,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '',
    jobEstimateMs: 0,
    used: '0:00',
    usedMs: 0,
    endUnix: 1741219200000
});
dates.push({
    id: '966',
    type: 'task',
    name: 'Soc Odsherred - flytning af oplysninger "Vores folkevalgte"',
    project: 'SOC stripe opgaver / Soc Odsherred: 3 timer webmaster',
    client: 'Socialdemokratiet',
    status: 'Done',
    assigned: 'Tidmand',
    startUnix: 1741219200000,
    estimate: '0:00',
    estimateMs: 0,
    endUnix: 1741219200000
});
dates.push({
    id: '1851',
    name: 'Soc Nordfyn: 60 minutters webmaster til DNS-håndtering + launch',
    project: 'SOC stripe opgaver',
    client: 'Socialdemokratiet',
    status: 'Doing',
    assigned: 'Tidmand',
    startUnix: 1742169600000,
    estimate: '',
    estimateMs: 0,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '',
    jobEstimateMs: 0,
    used: '0:00',
    usedMs: 0,
    endUnix: 1742169600000
});
dates.push({
    id: '1856',
    name: 'checkout',
    project: 'LOF WEB 2025 - udvikling',
    client: 'LOF landsorganisation',
    status: 'Todo',
    assigned: 'Niki Wix Skaarup',
    startUnix: 1742774400000,
    estimate: '',
    estimateMs: 0,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '',
    jobEstimateMs: 0,
    used: '0:00',
    usedMs: 0,
    endUnix: 1743120000000
});
dates.push({
    id: '1857',
    name: 'Opsætning af nyhedssetup',
    project: 'LOF WEB 2025 - udvikling',
    client: 'LOF landsorganisation',
    status: 'Todo',
    assigned: 'Jesper Ordrup',
    startUnix: 1743638400000,
    estimate: '',
    estimateMs: 0,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '',
    jobEstimateMs: 0,
    used: '0:00',
    usedMs: 0,
    endUnix: 1743638400000
});
dates.push({
    id: '1868',
    name: 'Ny ticket løsning',
    project: 'Østerbro teater primær konto',
    client: 'Østerbro Teater',
    status: 'Todo',
    assigned: 'Niki Wix Skaarup',
    startUnix: 1744675200000,
    estimate: '30:00',
    estimateMs: 108000000,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '30:00',
    jobEstimateMs: 108000000,
    used: '0:00',
    usedMs: 0,
    endUnix: 1745971200000
});
dates.push({
    id: '1869',
    name: 'New job ...',
    project: 'Integration med economics /  sagsystem',
    client: 'KUN-IT',
    status: 'Todo',
    assigned: 'Niki Wix Skaarup',
    startUnix: 1743465600000,
    estimate: '35:00',
    estimateMs: 126000000,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '35:00',
    jobEstimateMs: 126000000,
    used: '0:00',
    usedMs: 0,
    endUnix: 1744675200000
});
dates.push({
    id: '1871',
    name: 'Analyse ',
    project: 'Shopify Webshop',
    client: 'Farmwell ApS',
    status: 'Doing',
    assigned: 'Mads Zachariassen',
    startUnix: 1742947200000,
    estimate: '6:00',
    estimateMs: 21600000,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '6:00',
    jobEstimateMs: 21600000,
    used: '4:30',
    usedMs: 16200000,
    endUnix: 1743120000000
});
dates.push({
    id: '1877',
    name: 'Analyse ',
    project: '',
    client: '',
    status: 'Planning',
    assigned: '',
    startUnix: 1742947200000,
    estimate: '6:00',
    estimateMs: 21600000,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '6:00',
    jobEstimateMs: 21600000,
    used: '0:00',
    usedMs: 0,
    endUnix: 1743120000000
});
dates.push({
    id: '1878',
    name: 'Wireframe ',
    project: '',
    client: '',
    status: 'Planning',
    assigned: '',
    startUnix: 1743206400000,
    estimate: '12:00',
    estimateMs: 43200000,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '12:00',
    jobEstimateMs: 43200000,
    used: '0:00',
    usedMs: 0,
    endUnix: 1743465600000
});
dates.push({
    id: '1879',
    name: 'Design ',
    project: '',
    client: '',
    status: 'Planning',
    assigned: '',
    startUnix: 1743552000000,
    estimate: '12:00',
    estimateMs: 43200000,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '12:00',
    jobEstimateMs: 43200000,
    used: '0:00',
    usedMs: 0,
    endUnix: 1743811200000
});
dates.push({
    id: '1880',
    name: 'Implementering ',
    project: '',
    client: '',
    status: 'Planning',
    assigned: '',
    startUnix: 1743897600000,
    estimate: '30:00',
    estimateMs: 108000000,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '30:00',
    jobEstimateMs: 108000000,
    used: '0:00',
    usedMs: 0,
    endUnix: 1744502400000
});
dates.push({
    id: '1881',
    name: 'Launch ',
    project: '',
    client: '',
    status: 'Planning',
    assigned: '',
    startUnix: 1744588800000,
    estimate: '6:00',
    estimateMs: 21600000,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '6:00',
    jobEstimateMs: 21600000,
    used: '0:00',
    usedMs: 0,
    endUnix: 1744761600000
});
dates.push({
    id: '1882',
    name: 'In cooperation with – Doctype: Video',
    project: 'AVR Primær',
    client: 'Anne-Vibeke Rejser',
    status: 'Planning',
    assigned: '',
    startUnix: 1742169600000,
    estimate: '',
    estimateMs: 0,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '',
    jobEstimateMs: 0,
    used: '0:30',
    usedMs: 1800000,
    endUnix: 1742169600000
});
dates.push({
    id: '1887',
    name: 'Flytning af eksisterende content (webmaster-timer)',
    project: 'TAMU Hammercore inklusive 1:1 migrering',
    client: 'TAMU',
    status: 'Doing',
    assigned: 'Tidmand',
    startUnix: 1742860800000,
    estimate: '24:00',
    estimateMs: 86400000,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '24:00',
    jobEstimateMs: 86400000,
    used: '13:00',
    usedMs: 46800000,
    endUnix: 1743379200000
});
dates.push({
    id: '1889',
    name: 'Plausible opsætning og integration',
    project: 'Support / løbende opgaver',
    client: 'Dansk Emballage',
    status: 'Planning',
    assigned: '',
    startUnix: 1739750400000,
    estimate: '',
    estimateMs: 0,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '',
    jobEstimateMs: 0,
    used: '0:00',
    usedMs: 0,
    endUnix: 1739750400000
});
dates.push({
    id: '1890',
    name: 'P-nummer funktionalitet som CVR-nummer WooCommerce',
    project: 'Support / løbende opgaver',
    client: 'Dansk Emballage',
    status: 'Todo',
    assigned: 'Mads Zachariassen',
    startUnix: 1743379200000,
    estimate: '2:00',
    estimateMs: 7200000,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '2:00',
    jobEstimateMs: 7200000,
    used: '0:00',
    usedMs: 0,
    endUnix: 1743465600000
});
dates.push({
    id: '1897',
    name: 'Analyse UMAKERS metoden på os selv',
    project: 'Øvrige interne (ingen faktura)',
    client: 'UMAKERS',
    status: 'Todo',
    assigned: 'Mads Zachariassen',
    startUnix: 1743379200000,
    estimate: '6:00',
    estimateMs: 21600000,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '6:00',
    jobEstimateMs: 21600000,
    used: '0:00',
    usedMs: 0,
    endUnix: 1743465600000
});
dates.push({
    id: '1899',
    name: 'Pakker [brainstorm]',
    project: 'Øvrige interne (ingen faktura)',
    client: 'UMAKERS',
    status: 'Todo',
    assigned: 'Mads Zachariassen',
    startUnix: 1743552000000,
    estimate: '0:00',
    estimateMs: 0,
    tasksEstimate: '0:00',
    tasksEstimateMs: 0,
    jobEstimate: '0:00',
    jobEstimateMs: 0,
    used: '0:00',
    usedMs: 0,
    endUnix: 1743638400000
});

      (function runimmed() {
        debugger;
        let showPlanned = 0;
        const warningEstimatMsDailymax = 21600000; // 6 hours

        const distinctNames = [...new Set(dates.map((d) => d.assigned))];

        window.jobUrlPrefix =
          'https://app.ninox.com/#/teams/YWCzwq4FcnwWeXwbp/database/x5hqdm6zeqtz/module/Z/view/KlHGseS4XsiJ2udr/node/Z';

        window.taskUrlPrefix =
          'https://app.ninox.com/#/teams/YWCzwq4FcnwWeXwbp/database/x5hqdm6zeqtz/module/BB/view/z5sJXMv2QzbMxaW7/node/BB';

        window.currentStartDay = Date.now();
        window.currentAssigned = //##userName##;
          // Function to convert Unix timestamp to Date object
          function changeShowPlanned() {
            showPlanned++;
            if (showPlanned > 2) {
              showPlanned = 0;
            }

            const btn = document.getElementById('showPlanned');
            if (showPlanned === 0) {
              btn.innerText = 'Todo';
            }
            if (showPlanned === 1) {
              btn.innerText = 'Planning';
            }
            if (showPlanned === 2) {
              btn.innerText = 'All';
            }
          };

        // Function to convert Unix timestamp to Date object
        function unixToDate(unix) {
          return new Date(unix);
        }

        // Function to check if a date is a weekday (Monday to Friday)
        function isWeekday(date) {
          const day = date.getDay();
          return day >= 1 && day <= 5; // 1 = Monday, 5 = Friday
        }

        function msToHoursAndMinutes(ms) {
          const hours = Math.floor(ms / (60 * 60 * 1000)); // Get whole hours
          const minutes = Math.floor((ms % (60 * 60 * 1000)) / (60 * 1000)); // Get remaining minutes
          return `${hours}:${minutes.toString().padStart(2, '0')}`; // Format minutes to 2 digits
        }

        function decimalToHours(decimal) {
          const hoursDec = decimal / 3600000;
          const hours = Math.floor(hoursDec); // Get the whole number part as hours
          const minutes = Math.round((decimal - hours) * 60); // Get the decimal part and convert to minutes
          return `${hours}:${minutes} `;
        }

        // Function to create calendar entries
        function createCalendarEntries(dates) {
          let calendarEntries = [];

          dates.forEach((entry) => {
            const startDate = unixToDate(entry.startUnix);
            const endDate = entry.endUnix
              ? unixToDate(entry.endUnix)
              : new Date();

            let td = new Date(startDate);
            let n = 0;
            let t = 0;
            while (td <= endDate) {
              const isFridayButNotLastDay = td.getDay() === 5 && td < endDate;
              if (isWeekday(td) && !isFridayButNotLastDay) {
                t++;
              }
              td.setDate(td.getDate() + 1);
            }
            let currentDate = new Date(startDate);
            // Loop through the date range
            while (currentDate <= endDate) {
              const isFridayButNotLastDay =
                currentDate.getDay() === 5 && currentDate < endDate;
              if (isWeekday(currentDate) && !isFridayButNotLastDay) {
                calendarEntries.push({
                  type: entry.type,
                  name: entry.name,
                  status: entry.status,
                  client: entry.client,
                  project: entry.project,
                  used: entry.used,
                  estimateMs: entry.estimateMs,
                  tasksEstimateMs: entry.tasksEstimateMs,
                  usedMs: entry.usedMs,
                  date: currentDate.toLocaleDateString('da-DK'),
                  assigned: entry.assigned,
                  id: entry.id,
                  n: ++n,
                  t,
                });
              }
              currentDate.setDate(currentDate.getDate() + 1);
            }
          });

          return calendarEntries;
        }

        // Generate calendar entries
        const calendarEntries = createCalendarEntries(dates);

        function generateColor(name) {
          const hash = Array.from(name).reduce(
            (acc, char) => acc + char.charCodeAt(0),
            0
          );

          // Generate RGB values based on the hash
          const red = Math.max(0, (hash * 3) % 128); // Scale and wrap red value (0-127)
          const green = Math.max(0, (hash * 5) % 128); // Scale and wrap green value (0-127)
          const blue = Math.max(50, (hash * 7) % 256); // Ensure blue is at least 50 for contrast

          // Ensure gray shades
          if (red === green && green === blue) {
            // If all are equal, adjust to create a gray shade
            return `rgb(${red}, ${red}, ${red})`; // Return gray
          }

          return `rgb(${red}, ${green}, ${blue})`; // Return the RGB color
        }

        // Get the current week number and dates
        function getWeekInfo(start) {
          const now = new Date(start);
          const dayOfWeek = now.getDay();
          const diff = now.getDate() - dayOfWeek + (dayOfWeek === 0 ? -6 : 1); // adjust when day is sunday
          const startOfWeek = new Date(now.setDate(diff));

          let weekDates = [];

          for (let ix = 0; ix < 5; ix++) {
            const date = new Date(startOfWeek); // Create a new date from startOfWeek
            date.setDate(startOfWeek.getDate() + ix); // Add 'ix' days
            weekDates.push(date.toLocaleDateString('da-DK'));
          }

          return weekDates;
        }

        function runthis(start, assigned = null) {
          debugger;
          // Populate the planner with entries
          const weekDates = getWeekInfo(start);
          const dayElements = document.querySelectorAll('.day');

          dayElements.forEach((day, index) => {
            let totalDailyEstimate = 0;
            const date = weekDates[index];
            day.querySelector('.date').textContent = date;
            day.querySelector('.entries').innerHTML = ''; // Clear existing entries
            calendarEntries.forEach((entry) => {
              let estimateMs = entry.estimateMs;
              try {
                if (showPlanned === 0) {
                  // vis kun planlagt
                  if (entry.status === 'Planning') return;
                }
                if (showPlanned === 1) {
                  // vis kun planning
                  if (entry.status !== 'Planning') return;
                }
                entry.assigned = entry.assigned.trim();

                if (
                  entry.date === date &&
                  (assigned === null || entry.assigned === assigned)
                ) {
                  // Create a new entry element
                  const entryDiv = document.createElement('div');

                  let entryName = entry.name;

                  if (entry.status === 'Planning') {
                    entryDiv.className = 'entry planning';
                  } else {
                    entryDiv.className = 'entry ';
                    entryDiv.style.backgroundColor = generateColor(
                      entry.name + entry.id
                    );
                  }
                  if (entry.type === 'task') {
                    entryName = 'Task: ' + entryName;
                  }
                  let tempHtml = '<h4>' + entryName + '</h4>';

                  tempHtml +=
                    '<span><span class="status">' +
                    entry.status +
                    '</span>  ' +
                    entry.assigned +
                    '</span>';
                  tempHtml +=
                    '<span class="info">' +
                    entry.client +
                    ' / ' +
                    entry.project +
                    '</span>';

                  // tempHtml += '<span class="estimate">Total used: ' + entry.used + '</span>  ';

                  if (entry.type !== 'task') {
                    estimateMs = estimateMs - entry.tasksEstimateMs;
                  }

                  // job/task is spread over multiple days
                  if (entry.t > 1) {
                    totalDailyEstimate += estimateMs / entry.t;
                    tempHtml +=
                      '<span class="estimate">Estimate daily / total : ' +
                      msToHoursAndMinutes(estimateMs / entry.t) +
                      ' / ' +
                      msToHoursAndMinutes(estimateMs) +
                      '</span> ';
                    tempHtml +=
                      '<div class="ecount"> (' +
                      entry.n +
                      '/' +
                      entry.t +
                      ')</div>';
                  } else {
                    totalDailyEstimate += estimateMs;
                    tempHtml +=
                      '<span class="estimate">Total estimate: ' +
                      msToHoursAndMinutes(estimateMs) +
                      '</span>  ';
                  }

                  entryDiv.innerHTML = tempHtml;
                  entryDiv.addEventListener('click', function () {
                    if (entry.type === 'task') {
                      window.open(taskUrlPrefix + entry.id, entry.id);
                    } else {
                      window.open(jobUrlPrefix + entry.id, entry.id);
                    }
                  });

                  // Append the entry to the appropriate day
                  day.querySelector('.entries').appendChild(entryDiv);
                }
              } catch (error) {
                debugger;
                alert(error.message);
              }
            });

            // insert totalDailyEstimate

            if (
              totalDailyEstimate > warningEstimatMsDailymax &&
              window.currentAssigned != null
            ) {
              day.querySelector('.dailyEstimate').innerHTML =
                '<span style="color:red">' +
                msToHoursAndMinutes(totalDailyEstimate) +
                ' !!!</span>';
            } else {
              day.querySelector('.dailyEstimate').innerHTML =
                '<span>' + msToHoursAndMinutes(totalDailyEstimate) + '</span>';
            }
          });
        }

        // Populate the dropdown
        const dropdown = document.getElementById('nameDropdown');
        distinctNames.forEach((name) => {
          const option = document.createElement('option');
          if (name === '' || name === null) {
            return;
          }
          option.value = name;
          option.textContent = name;
          dropdown.appendChild(option);
        });

        // Function to call on change
        function handleChange(event) {
          const selectedName = event.target.value;
          console.log('Selected:', selectedName);
          window.currentAssigned = selectedName;
          sessionStorage.setItem('lastSelectedName', selectedName);
          if (selectedName === '') {
            window.currentAssigned = null;
          }
          runthis(window.currentStartDay, window.currentAssigned);
        }

        // Attach event listener
        dropdown.addEventListener('change', handleChange);
        const lastSelectedName = sessionStorage.getItem('lastSelectedName');
        if (lastSelectedName) {
          dropdown.value = lastSelectedName;
        }

        function getUniqueAssignedValues(entries) {
          const assignedValues = entries.map((entry) => entry.assigned); // Extract assigned values
          const uniqueAssignedValues = [...new Set(assignedValues)]; // Use Set to get unique values
          return uniqueAssignedValues;
        }
        function addSevenDays(unixTimestamp) {
          const date = new Date(unixTimestamp);
          date.setDate(date.getDate() + 7); // Add 7 days
          return date.getTime(); // Return the updated timestamp
        }

        function subSevenDays(unixTimestamp) {
          const date = new Date(unixTimestamp);
          date.setDate(date.getDate() - 7); // Subtract 7 days
          return date.getTime(); // Return the updated timestamp
        }

        document.getElementById('today').addEventListener('click', function () {
          window.currentStartDay = Date.now();
          sessionStorage.setItem('selectedDate', window.currentStartDay);
          runthis(window.currentStartDay, window.currentAssigned);
        });

        document
          .getElementById('forward')
          .addEventListener('click', function () {
            window.currentStartDay = addSevenDays(window.currentStartDay);
            sessionStorage.setItem('selectedDate', window.currentStartDay);
            runthis(window.currentStartDay, window.currentAssigned);
          });

        document.getElementById('back').addEventListener('click', function () {
          window.currentStartDay = subSevenDays(window.currentStartDay);
          sessionStorage.setItem('selectedDate', window.currentStartDay);
          runthis(window.currentStartDay, window.currentAssigned);
        });

        document
          .getElementById('showPlanned')
          .addEventListener('click', function () {
            changeShowPlanned();
            runthis(window.currentStartDay, window.currentAssigned);
          });

        runthis(window.currentStartDay, window.currentAssigned);
      })();
    </script>
    <span
      style="
        font-size: 10px;
        color: #313131;
        display: block;
        text-align: center;
        margin-top: 16px;
      ">
      V1.1.4</span
    >
  </body>
</html>
